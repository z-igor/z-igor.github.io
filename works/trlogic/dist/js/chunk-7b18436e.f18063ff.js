(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b18436e"],{"4fad":function(t,e,i){var n=i("23e7"),a=i("6f53").entries;n({target:"Object",stat:!0},{entries:function(t){return a(t)}})},"6f53":function(t,e,i){var n=i("83ab"),a=i("df75"),s=i("fc6a"),c=i("d1e7").f,o=function(t){return function(e){var i,o=s(e),l=a(o),r=l.length,d=0,u=[];while(r>d)i=l[d++],n&&!c.call(o,i)||u.push(t?[i,o[i]]:o[i]);return u}};t.exports={entries:o(!0),values:o(!1)}},b8fa:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content"},[i("div",{staticClass:"header"},[i("div",{staticClass:"header-head"},[i("div",{staticClass:"breadcrumbs"},[t._v("home / contacts / "+t._s(t.$route.params.id))]),i("h1",{staticClass:"header-head__title"},[t._v(t._s(t.title))])])]),i("div",{staticClass:"content-body"},[i("div",{staticClass:"contacts-edit"},[i("h3",{staticClass:"contacts-edit__title"},[t._v("Редактировать")]),i("form",{key:t.update,staticClass:"contacts-edit__form",on:{submit:function(t){t.preventDefault()}}},[t._l(t.filterContact,(function(e,n){return i("label",{key:e[0]+n},[i("p",[t._v(t._s(t._f("headers")(t.firstLetter(e[0]))))]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.contact[e[0]],expression:"contact[elm[0]]"}],attrs:{type:"text",name:"firstName",placeholder:"Name"},domProps:{value:t.contact[e[0]]},on:{input:function(i){i.target.composing||t.$set(t.contact,e[0],i.target.value)}}}),i("button",{staticClass:"btni btn-danger",on:{click:function(i){return t.onRemoveFieldClick(i,e)}}},[i("fa-icon",{attrs:{icon:["fa","trash"]}})],1)])})),i("div",{directives:[{name:"show",rawName:"v-show",value:t.newField,expression:"newField"}],staticClass:"newField"},[i("label",[i("p",[t._v("Новое поле")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.newFieldKey,expression:"newFieldKey"}],attrs:{type:"text",name:"new-field",placeholder:"Значение поля"},domProps:{value:t.newFieldKey},on:{input:function(e){e.target.composing||(t.newFieldKey=e.target.value)}}})]),i("label",[i("p",[t._v("Новое значение")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.newFieldVal,expression:"newFieldVal"}],attrs:{type:"text",name:"new-field-val",placeholder:"Новое значение"},domProps:{value:t.newFieldVal},on:{input:function(e){e.target.composing||(t.newFieldVal=e.target.value)}}})])]),i("div",{staticClass:"form-action"},[i("button",{staticClass:"btn btn-primary",attrs:{disabled:t.isDisableSave},on:{click:t.onUpdateClick}},[t._v("Сохранить")]),i("button",{staticClass:"btn btn-success",on:{click:t.onAddNewFieldClick}},[t._v("Добавить поле")]),i("button",{staticClass:"btn btn-light",attrs:{title:"Сброс редактирования и нового поля"},on:{click:t.onCancelClick}},[t._v("Отмена")]),i("button",{staticClass:"btni btn-primary",attrs:{title:"Отменить последнее изменение",disabled:t.canUndo},on:{click:t.undo}},[i("fa-icon",{attrs:{icon:["fa","undo"]}})],1)])],2)])]),i("ContentFooter")],1)},a=[],s=(i("4de4"),i("c740"),i("fb6a"),i("a434"),i("b0c0"),i("4fad"),i("ade3")),c=i("5530"),o=i("c1bb"),l=i("2f62"),r=i("1b62"),d={name:"contact",data:function(){return{title:"",contact:{},newField:!1,newFieldKey:"",newFieldVal:null,saveTimeout:null,isDisableSave:!0,update:null}},computed:Object(c["a"])(Object(c["a"])({},Object(l["b"])(["getContact"])),{},{filterContact:function(){return Object.entries(this.contact).filter((function(t){return"added"!==t[0]&&"removed"!==t[0]&&"id"!==t[0]}))}}),methods:{onUpdateClick:function(){""!==this.newFieldKey&&null!==this.newFieldVal&&(this.hasDuplicate(this.newFieldKey)||(this.contact=Object(c["a"])(Object(c["a"])({},this.contact),{},Object(s["a"])({},this.newFieldKey.toLowerCase(),this.newFieldVal)),this.$store.dispatch("addHeaders",this.newFieldKey))),this.$store.dispatch("updateContact",this.contact),this.$store.dispatch("setNotification",{page:"contacts",bool:!0}),this.done.pop(),this.done.push(Object(c["a"])({},this.contact)),this.title=this.contact.name,this.newField=!1,this.newFieldKey="",this.newFieldVal=null,this.activeTimeoutBtnSave(),this.update++},onAddNewFieldClick:function(){this.newField=!this.newField,this.newFieldKey="",this.newFieldVal=null},onRemoveFieldClick:function(t,e){var i=confirm("Удалить поле?");if(i){var n=this.filterContact.findIndex((function(t){return t[0]===e[0]}));this.filterContact.splice(n,1),delete this.contact[e[0]],this.update++}},onCancelClick:function(){var t=confirm("Отменить?");t&&(this.newField=!1,this.contact=this.getContact(this.$route.params.id))},firstLetter:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},hasDuplicate:function(t){var e=this.filterContact.findIndex((function(e){return e[0]===t.toLowerCase()}));return-1!==e},activeTimeoutBtnSave:function(){var t=this;this.isDisableSave=!0,this.saveTimeout=setTimeout((function(){t.isDisableSave=!1}),1e3)}},mixins:[r["a"]],mounted:function(){this.contact=this.getContact(this.$route.params.id),this.title=this.contact.name,this.activeTimeoutBtnSave()},components:{ContentFooter:o["a"]}},u=d,h=i("2877"),f=Object(h["a"])(u,n,a,!1,null,null,null);e["default"]=f.exports}}]);
//# sourceMappingURL=chunk-7b18436e.f18063ff.js.map